<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/favicon.ico"><title>优化 - 防抖和节流 | PHYGRAY</title><meta name="description" content="">
    <link rel="modulepreload" href="/fffxx/assets/app.1cec8105.js"><link rel="modulepreload" href="/fffxx/assets/22032801.html.a5c7ea5c.js"><link rel="modulepreload" href="/fffxx/assets/22032801.html.93d77097.js"><link rel="prefetch" href="/fffxx/assets/index.html.21d4b2b9.js"><link rel="prefetch" href="/fffxx/assets/example.html.af214b0b.js"><link rel="prefetch" href="/fffxx/assets/21052801.html.d4879537.js"><link rel="prefetch" href="/fffxx/assets/21060501.html.4d1712f1.js"><link rel="prefetch" href="/fffxx/assets/21061101.html.b91d3b37.js"><link rel="prefetch" href="/fffxx/assets/21061701.html.45147db5.js"><link rel="prefetch" href="/fffxx/assets/22101001.html.5571451b.js"><link rel="prefetch" href="/fffxx/assets/22101803.html.4e236e5e.js"><link rel="prefetch" href="/fffxx/assets/index.html.d1326f53.js"><link rel="prefetch" href="/fffxx/assets/21062601.html.48ecc485.js"><link rel="prefetch" href="/fffxx/assets/22051201.html.45bc6740.js"><link rel="prefetch" href="/fffxx/assets/21121801.html.27e3d846.js"><link rel="prefetch" href="/fffxx/assets/22012601.html.1ba3c23e.js"><link rel="prefetch" href="/fffxx/assets/22101801.html.5f2d32cb.js"><link rel="prefetch" href="/fffxx/assets/22101802.html.54850321.js"><link rel="prefetch" href="/fffxx/assets/21062401.html.f01f1296.js"><link rel="prefetch" href="/fffxx/assets/22101804.html.37ed70bf.js"><link rel="prefetch" href="/fffxx/assets/404.html.98e87f94.js"><link rel="prefetch" href="/fffxx/assets/index.html.72ac4063.js"><link rel="prefetch" href="/fffxx/assets/index.html.a6eabc8f.js"><link rel="prefetch" href="/fffxx/assets/index.html.509a1212.js"><link rel="prefetch" href="/fffxx/assets/index.html.5dd30893.js"><link rel="prefetch" href="/fffxx/assets/index.html.36cac882.js"><link rel="prefetch" href="/fffxx/assets/index.html.09de23ca.js"><link rel="prefetch" href="/fffxx/assets/index.html.b8f9376d.js"><link rel="prefetch" href="/fffxx/assets/index.html.d9c65a35.js"><link rel="prefetch" href="/fffxx/assets/index.html.db5d0cde.js"><link rel="prefetch" href="/fffxx/assets/index.html.dd182182.js"><link rel="prefetch" href="/fffxx/assets/index.html.eca81101.js"><link rel="prefetch" href="/fffxx/assets/index.html.9f048843.js"><link rel="prefetch" href="/fffxx/assets/index.html.c8da8448.js"><link rel="prefetch" href="/fffxx/assets/index.html.3213a287.js"><link rel="prefetch" href="/fffxx/assets/index.html.4bcc82d4.js"><link rel="prefetch" href="/fffxx/assets/index.html.7d4d0737.js"><link rel="prefetch" href="/fffxx/assets/index.html.4d436fc2.js"><link rel="prefetch" href="/fffxx/assets/index.html.f5f0869a.js"><link rel="prefetch" href="/fffxx/assets/index.html.e6b68b14.js"><link rel="prefetch" href="/fffxx/assets/index.html.1cb64cea.js"><link rel="prefetch" href="/fffxx/assets/index.html.3f58339f.js"><link rel="prefetch" href="/fffxx/assets/index.html.4dccc96f.js"><link rel="prefetch" href="/fffxx/assets/index.html.d0c99eb3.js"><link rel="prefetch" href="/fffxx/assets/index.html.177fdf55.js"><link rel="prefetch" href="/fffxx/assets/index.html.3bd2bde1.js"><link rel="prefetch" href="/fffxx/assets/index.html.ca3a179e.js"><link rel="prefetch" href="/fffxx/assets/index.html.abf05024.js"><link rel="prefetch" href="/fffxx/assets/index.html.707fa130.js"><link rel="prefetch" href="/fffxx/assets/index.html.da7fd78e.js"><link rel="prefetch" href="/fffxx/assets/index.html.ab434cf0.js"><link rel="prefetch" href="/fffxx/assets/index.html.3dd3dad1.js"><link rel="prefetch" href="/fffxx/assets/index.html.ae7b71b8.js"><link rel="prefetch" href="/fffxx/assets/index.html.a2e0a558.js"><link rel="prefetch" href="/fffxx/assets/index.html.b57762aa.js"><link rel="prefetch" href="/fffxx/assets/index.html.08b3a957.js"><link rel="prefetch" href="/fffxx/assets/index.html.ddf8b7ea.js"><link rel="prefetch" href="/fffxx/assets/example.html.28a1eb5d.js"><link rel="prefetch" href="/fffxx/assets/21052801.html.aabbe11b.js"><link rel="prefetch" href="/fffxx/assets/21060501.html.c52ec648.js"><link rel="prefetch" href="/fffxx/assets/21061101.html.b3028833.js"><link rel="prefetch" href="/fffxx/assets/21061701.html.6aec8a9a.js"><link rel="prefetch" href="/fffxx/assets/22101001.html.22c41986.js"><link rel="prefetch" href="/fffxx/assets/22101803.html.26f66613.js"><link rel="prefetch" href="/fffxx/assets/index.html.6f498be9.js"><link rel="prefetch" href="/fffxx/assets/21062601.html.c3630f5b.js"><link rel="prefetch" href="/fffxx/assets/22051201.html.477c7113.js"><link rel="prefetch" href="/fffxx/assets/21121801.html.22fe3482.js"><link rel="prefetch" href="/fffxx/assets/22012601.html.cf926990.js"><link rel="prefetch" href="/fffxx/assets/22101801.html.44da599c.js"><link rel="prefetch" href="/fffxx/assets/22101802.html.b3602b6a.js"><link rel="prefetch" href="/fffxx/assets/21062401.html.5944e311.js"><link rel="prefetch" href="/fffxx/assets/22101804.html.8f5d9728.js"><link rel="prefetch" href="/fffxx/assets/404.html.bc9b349b.js"><link rel="prefetch" href="/fffxx/assets/index.html.ffa023bf.js"><link rel="prefetch" href="/fffxx/assets/index.html.d19d7cfd.js"><link rel="prefetch" href="/fffxx/assets/index.html.282d469c.js"><link rel="prefetch" href="/fffxx/assets/index.html.16e023bb.js"><link rel="prefetch" href="/fffxx/assets/index.html.ef991577.js"><link rel="prefetch" href="/fffxx/assets/index.html.c06bf827.js"><link rel="prefetch" href="/fffxx/assets/index.html.34909210.js"><link rel="prefetch" href="/fffxx/assets/index.html.4f0c75a7.js"><link rel="prefetch" href="/fffxx/assets/index.html.dbcf3080.js"><link rel="prefetch" href="/fffxx/assets/index.html.1edb01a1.js"><link rel="prefetch" href="/fffxx/assets/index.html.b6a24267.js"><link rel="prefetch" href="/fffxx/assets/index.html.2e4504b8.js"><link rel="prefetch" href="/fffxx/assets/index.html.c8daacf7.js"><link rel="prefetch" href="/fffxx/assets/index.html.7a6e5e8c.js"><link rel="prefetch" href="/fffxx/assets/index.html.69ff7003.js"><link rel="prefetch" href="/fffxx/assets/index.html.8634e576.js"><link rel="prefetch" href="/fffxx/assets/index.html.9947608a.js"><link rel="prefetch" href="/fffxx/assets/index.html.a37513ce.js"><link rel="prefetch" href="/fffxx/assets/index.html.0a267840.js"><link rel="prefetch" href="/fffxx/assets/index.html.98027cfb.js"><link rel="prefetch" href="/fffxx/assets/index.html.835b9070.js"><link rel="prefetch" href="/fffxx/assets/index.html.4a8ca7a4.js"><link rel="prefetch" href="/fffxx/assets/index.html.913bd7be.js"><link rel="prefetch" href="/fffxx/assets/index.html.153b9de7.js"><link rel="prefetch" href="/fffxx/assets/index.html.d3b0c58a.js"><link rel="prefetch" href="/fffxx/assets/index.html.223d01d4.js"><link rel="prefetch" href="/fffxx/assets/index.html.415e6c2c.js"><link rel="prefetch" href="/fffxx/assets/index.html.e0b55a73.js"><link rel="prefetch" href="/fffxx/assets/index.html.33f00e2f.js"><link rel="prefetch" href="/fffxx/assets/index.html.87641af7.js"><link rel="prefetch" href="/fffxx/assets/index.html.e0bbc1e7.js"><link rel="prefetch" href="/fffxx/assets/index.html.30c7f15d.js"><link rel="prefetch" href="/fffxx/assets/index.html.5cfea12e.js"><link rel="prefetch" href="/fffxx/assets/index.html.ccdf396c.js"><link rel="prefetch" href="/fffxx/assets/index.html.ed8f338c.js"><link rel="prefetch" href="/fffxx/assets/reco-valine.ed4545b0.js">
    <link rel="stylesheet" href="/fffxx/assets/style.ccef12ba.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper no-sidebar"><div><header class="navbar-container"><span class="nav-item site-brand"><a href="/fffxx/" class=""><!--v-if--><span class="site-name">PHYGRAY</span></a></span><div class="nav-item navbar-links-wrapper" style=""><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/fffxx/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/fffxx/categories/ganxieshenghuo/1/" class="nav-link" aria-label="分类"><!--[--><!--]--> 分类 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/fffxx/tags/kaishi/1/" class="nav-link" aria-label="标签"><!--[--><!--]--> 标签 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/fffxx/docs/about/" class="nav-link" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a><a class="icon-container left btn-toggle-menus" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle><circle cx="12" cy="5" r="1"></circle></g></svg><!----></a></div></header><div class="mobile-menus-container"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/fffxx/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/fffxx/categories/ganxieshenghuo/1/" class="nav-link" aria-label="分类"><!--[--><!--]--> 分类 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/fffxx/tags/kaishi/1/" class="nav-link" aria-label="标签"><!--[--><!--]--> 标签 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/fffxx/docs/about/" class="nav-link" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance </span><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a></div></div><div class="sidebar-mask"></div><aside class="series-container"><!--[--><!--]--></aside><!--[--><main class="page-container show-catalog"><h1 class="page-title">优化 - 防抖和节流</h1><div class="page-info"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"></circle><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->太灰<!--]--></span></a><!----><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->思考学习<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"></circle><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->思考 Js 防抖 节流<!--]--></span></a><!----></div><div class="theme-reco-default-content"><div><!-- more --><h2 id="防抖函数-debounce" tabindex="-1"><a class="header-anchor" href="#防抖函数-debounce" aria-hidden="true">#</a> 防抖函数（Debounce）</h2><h3 id="概念理解" tabindex="-1"><a class="header-anchor" href="#概念理解" aria-hidden="true">#</a> 概念理解：</h3><blockquote><p><strong>防抖的解释</strong>：在一定时间内，多次触发，只执行一次。总结两种场景应用：</p></blockquote><p><strong>最后执行</strong>：多次触发时，则会把前面执行的函数去掉，重新开始计时，直到没有触发后，执行最后一次。</p><p>适用场景：</p><p>1、输入框远程搜索，在输入完成后，才会进行搜索。 2、快速点击点赞或者取消点赞。</p><p><strong>立即执行</strong>：多次触发时，函数立即执行，在规定时间节奏内，多次点击不再生效，直到这个时间节奏结束。</p><p>适用场景：禁止连续点击</p><h3 id="前提知识点" tabindex="-1"><a class="header-anchor" href="#前提知识点" aria-hidden="true">#</a> 前提知识点：</h3><p>需要在理解以下三个知识点，再去理解防抖节流。</p><ul><li>闭包</li><li>定时器应用</li><li>this 指针</li></ul><h3 id="函数代码" tabindex="-1"><a class="header-anchor" href="#函数代码" aria-hidden="true">#</a> 函数代码：</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
* @description: 防抖 - 触发后执行
* @param: {
	fn:回调函数；
	delay:number类型，setTimeout的时间参数；
	}
*/</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 形成闭包 </span>
     <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>           <span class="token comment">// args 为函数调用时传的参数。</span>
          <span class="token keyword">let</span> _that <span class="token operator">=</span> <span class="token keyword">this</span>
          timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
          timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_that<span class="token punctuation">,</span> args<span class="token punctuation">)</span>    <span class="token comment">// 利用apply更改this绑定和传参</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
* @description: 防抖 - 触发立即执行
* @param: {
	fn:回调函数；
	delay:number类型，setTimeout的时间参数；
	}
*/</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> _that <span class="token operator">=</span> <span class="token keyword">this</span>
         <span class="token keyword">let</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span>
         timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
         timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              timer <span class="token operator">=</span> <span class="token keyword">null</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_that<span class="token punctuation">,</span> args<span class="token punctuation">)</span>  
         <span class="token punctuation">}</span>
         <span class="token comment">// else { 可自定义连续点击触发的提示 }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用方法" tabindex="-1"><a class="header-anchor" href="#调用方法" aria-hidden="true">#</a> 调用方法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">debounce</span><span class="token punctuation">(</span>函数名<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="节流函数-throttle" tabindex="-1"><a class="header-anchor" href="#节流函数-throttle" aria-hidden="true">#</a> 节流函数（Throttle）</h2><h3 id="概念理解-1" tabindex="-1"><a class="header-anchor" href="#概念理解-1" aria-hidden="true">#</a> 概念理解：</h3><blockquote><p>截流：一段时间内减少触发频率。</p></blockquote><p>适用场景：</p><p>1、页面上的滚动监听 2、页面的视窗变化</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
* @description: 节流 - 定时器型
* @param: {
	fn:回调函数；
	delay:number类型，setTimeout的时间参数；
	}
*/</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> _that <span class="token operator">=</span> <span class="token keyword">this</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>						<span class="token comment">// 如果timer存在，说明函数还未该执行</span>
              timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
                   timer <span class="token operator">=</span> <span class="token keyword">null</span>				<span class="token comment">// 当函数执行时，让timer为null。</span>
                   <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_that<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
* @description: 节流 - 时间计数型
* @param: {
	fn:回调函数；
	delay:number类型，setTimeout的时间参数；
	}
*/</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> _that <span class="token operator">=</span> <span class="token keyword">this</span>
         <span class="token keyword">let</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> lastTime <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_that<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
              lastTime <span class="token operator">=</span> nowTime
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用方法-1" tabindex="-1"><a class="header-anchor" href="#调用方法-1" aria-hidden="true">#</a> 调用方法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">throttle</span><span class="token punctuation">(</span>函数名<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="关于几个问题的解释" tabindex="-1"><a class="header-anchor" href="#关于几个问题的解释" aria-hidden="true">#</a> 关于几个问题的解释：</h2><h3 id="指针问题" tabindex="-1"><a class="header-anchor" href="#指针问题" aria-hidden="true">#</a> 指针问题：</h3><p>因为程序中很多地方都需要使用 this 指针，如果对于this指向的理解不深入的话，很容易出现以下情况：</p><p><code>1:this==undefined</code><code>2:Error:data is not defined</code></p><p>apply、call、bind 是为了改变 this 指针而应用。</p><p>具体理解需学习相关专题。</p><h3 id="闭包问题" tabindex="-1"><a class="header-anchor" href="#闭包问题" aria-hidden="true">#</a> 闭包问题：</h3><p>代码中 return {} 用到了闭包的概念，作用是将定义的自由变量（如：timer）在本次作用域内不被销毁的调用。</p><p>vue 中结合实例 data 特性，可以不使用闭包，需将 timer 自由变量定义在 data 内。（本身可以理解为一个大闭包）</p><p>具体理解需学习相关专题。</p><h3 id="事件执行问题" tabindex="-1"><a class="header-anchor" href="#事件执行问题" aria-hidden="true">#</a> 事件执行问题：</h3><p>在 html 的 onclick 行内添加一个方法（或者在 vue @click事件），每次触发点击事件都会执行该方法，看似没什么问题，但如果这个方法返回的是一个方法呢，如果我们想让返回出来的方法得到执行，就要在行内的末尾加上一对括号，结果就是每次执行返回出来的内部方法都是新的，<a href="">闭包</a>？我们想要使用的闭包失效了。</p><p>解决方案 2 种：</p><ol><li><p>在 script 标签中给 dom 元素的 onclick 赋值这个方法的执行，返回出来的内部方法就可以应用闭包</p><p>（原生 js）<code>Dom.onclick = debounce(fn,delay)</code></p><p>（vue 的 method）： <code>handle: debounce(fn,delay)</code></p></li><li><p>使用 addEventListener 给 dom 元素添加 click 事件，赋值依然为外层方法的执行</p><p><code>Dom.addEventListener(&#39;click&#39;, debounce(submit), false)</code></p></li></ol><p><strong>具体理解为什么闭包会失效？</strong></p><p>先了解 <a href="https://www.runoob.com/jsref/event-onclick.html" target="_blank" rel="noopener noreferrer">onclick<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>onclick<span class="token operator">=</span><span class="token string">&quot; SomeJavaScriptCode &quot;</span> 
<span class="token comment">// 等价于</span>
object<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> SomeJavaScriptCode <span class="token punctuation">}</span>
<span class="token comment">/*
点击执行 function 调用 debounce，debounce 直接 return ，相当于 function 运行指针到了 一段代码明文
这段代码字符串后面如果跟括号，可以正常运行，但是脱离了原本的闭包函数，相当于一个新的函数，闭包内的 自由变量 就会失去原来的空间栈，所以每次运行都会重新定义
*/</span>

object<span class="token punctuation">.</span>onclick <span class="token operator">=</span> SomeJavaScriptCode 
<span class="token comment">// 注意和上边的区别</span>
<span class="token comment">/*
点击就直接执行 debounce，onclick 就是 debounce，给予 debounce onclick的事件属性
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><!----><!----></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#防抖函数-debounce" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="防抖函数（Debounce）"><!--[--><!--]--> 防抖函数（Debounce） <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#概念理解" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="概念理解："><!--[--><!--]--> 概念理解： <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#前提知识点" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="前提知识点："><!--[--><!--]--> 前提知识点： <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#函数代码" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="函数代码："><!--[--><!--]--> 函数代码： <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#调用方法" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="调用方法"><!--[--><!--]--> 调用方法 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#节流函数-throttle" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="节流函数（Throttle）"><!--[--><!--]--> 节流函数（Throttle） <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#概念理解-1" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="概念理解："><!--[--><!--]--> 概念理解： <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#调用方法-1" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="调用方法"><!--[--><!--]--> 调用方法 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#关于几个问题的解释" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="关于几个问题的解释："><!--[--><!--]--> 关于几个问题的解释： <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#指针问题" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="指针问题："><!--[--><!--]--> 指针问题： <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#闭包问题" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="闭包问题："><!--[--><!--]--> 闭包问题： <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/fffxx/blogs/front-end/javascript/22032801.html#事件执行问题" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="事件执行问题："><!--[--><!--]--> 事件执行问题： <!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/fffxx/assets/app.1cec8105.js" defer></script>
  </body>
</html>
